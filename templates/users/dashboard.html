{% extends 'base/base.html' %}
{% load static %}
{% block title %}Dashboard - CursosMarlon{% endblock %}

{% block content %}
<div class="container py-5">
    <div class="row">
        <div class="col-12 mb-4">
            <h1 class="fw-bold">Hola, {{ user.first_name }}!</h1>
            <p class="text-muted">Bienvenido a tu panel de control</p>
        </div>
    </div>
    <div class="row mb-5">
        <div class="col-md-3">
            {% include 'cursos/_dashboard_sidebar.html' %}
        </div>
        <div class="col-md-9">
            <!-- ...contenido del dashboard... -->
            <div class="card mb-4">
                <div class="card-body">
                    <h4>Bienvenido, {{ user.get_full_name }}</h4>
                    <p>Desde aquí puedes gestionar tus cursos, subir nuevas clases y configurar tus métodos de pago.</p>
                </div>
            </div>
            <div class="card mb-4">
                <div class="card-header">Estadísticas</div>
                <div class="card-body">
                    <a href="{% url 'estadisticas' %}" class="btn btn-secondary">Ver Estadísticas</a>
                    <p class="mt-3">Ventas totales: <strong>{{ ventas_totales }}</strong></p>
                    <p>Estudiantes inscritos: <strong>{{ estudiantes_inscritos }}</strong></p>
                </div>
            </div>
            <div class="card mb-4">
                <div class="card-header">Cursos</div>
                <ul class="list-group list-group-flush">
                    {% for course in my_courses %}
                    <li class="list-group-item d-flex justify-content-between align-items-center">
                        <span>{{ course.title }}</span>
                        <a href="{% url 'course_detail' course.slug %}" class="btn btn-sm btn-primary">Ver</a>
                    </li>
                    {% empty %}
                    <li class="list-group-item">No tienes cursos creados aún.</li>
                    {% endfor %}
                </ul>
                <div class="card-body">
                    <a href="{% url 'course_create' %}" class="btn btn-success">Crear Nuevo Curso</a>
                </div>
            </div>
            <div class="card mb-4">
                <div class="card-header">Clases</div>
                <div class="card-body">
                    <a href="{% url 'lesson_create' %}" class="btn btn-info">Añadir Nueva Clase</a>
                </div>
            </div>
            <div class="card mb-4">
                <div class="card-header">Pagos</div>
                <div class="card-body">
                    <a href="{% url 'configurar_pagos' %}" class="btn btn-warning">Configurar Pagos</a>
                </div>
            </div>
        </div>
    </div>
</div>
{% endblock %}
                                        </div>
                                    </div>
                                </div>